!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).autosize=t()}(this,function(){var a=new Map;function o(r){var i,l,e,t,o;function s(e){var t,o=e.restoreTextAlign,o=void 0===o?null:o,e=e.testForHeightReduction,e=void 0===e||e,n=l.overflowY;0===r.scrollHeight||("vertical"===l.resize?r.style.resize="none":"both"===l.resize&&(r.style.resize="horizontal"),e&&(t=function(e){for(var t=[];e&&e.parentNode&&e.parentNode instanceof Element;)e.parentNode.scrollTop&&t.push([e.parentNode,e.parentNode.scrollTop]),e=e.parentNode;return function(){return t.forEach(function(e){var t=e[0],e=e[1];t.style.scrollBehavior="auto",t.scrollTop=e,t.style.scrollBehavior=null})}}(r),r.style.height=""),e="content-box"===l.boxSizing?r.scrollHeight-(parseFloat(l.paddingTop)+parseFloat(l.paddingBottom)):r.scrollHeight+parseFloat(l.borderTopWidth)+parseFloat(l.borderBottomWidth),"none"!==l.maxHeight&&e>parseFloat(l.maxHeight)?("hidden"===l.overflowY&&(r.style.overflow="scroll"),e=parseFloat(l.maxHeight)):"hidden"!==l.overflowY&&(r.style.overflow="hidden"),r.style.height=e+"px",o&&(r.style.textAlign=o),t&&t(),i!==e&&(r.dispatchEvent(new Event("autosize:resized",{bubbles:!0})),i=e),n===l.overflow)||o||(t=l.textAlign,"hidden"===l.overflow&&(r.style.textAlign="start"===t?"end":"start"),s({restoreTextAlign:t,testForHeightReduction:!0}))}function n(){s({testForHeightReduction:!0,restoreTextAlign:null})}r&&r.nodeName&&"TEXTAREA"===r.nodeName&&!a.has(r)&&(i=null,l=window.getComputedStyle(r),t=r.value,e=function(){s({testForHeightReduction:""===t||!r.value.startsWith(t),restoreTextAlign:null}),t=r.value},o=function(t){r.removeEventListener("autosize:destroy",o),r.removeEventListener("autosize:update",n),r.removeEventListener("input",e),window.removeEventListener("resize",n),Object.keys(t).forEach(function(e){return r.style[e]=t[e]}),a.delete(r)}.bind(r,{height:r.style.height,resize:r.style.resize,textAlign:r.style.textAlign,overflowY:r.style.overflowY,overflowX:r.style.overflowX,wordWrap:r.style.wordWrap}),r.addEventListener("autosize:destroy",o),r.addEventListener("autosize:update",n),r.addEventListener("input",e),window.addEventListener("resize",n),r.style.overflowX="hidden",r.style.wordWrap="break-word",a.set(r,{destroy:o,update:n}),n())}function t(e){e=a.get(e);e&&e.destroy()}function n(e){e=a.get(e);e&&e.update()}var e=null;return"undefined"==typeof window?((e=function(e){return e}).destroy=function(e){return e},e.update=function(e){return e}):((e=function(e,t){return e&&Array.prototype.forEach.call(e.length?e:[e],o),e}).destroy=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],t),e},e.update=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],n),e}),e}),function(){var e=document.querySelectorAll("textarea:not(.code)");e.length&&autosize(e)}();